<%- include('../layouts/header') %>

<div class="container mt-4">
  <div class="card">
    <div class="card-header bg-primary text-white">
      <h4>
        <i class="fas fa-user-edit me-2"></i>
        Manual Promotion for <%= student.first_name %> <%= student.last_name %>
      </h4>
    </div>

    <div class="card-body">
      <form action="/promotion/manual/<%= student.id %>" method="POST">
        <!-- Current Information -->
        <div class="row mb-3">
          <div class="col-md-4">
            <label class="form-label">Current Class</label>
            <input
              type="text"
              class="form-control"
              value="<%= currentClass.class_name %>"
              readonly
            />
          </div>
          <div class="col-md-4">
            <label class="form-label">Current Section</label>
            <input
              type="text"
              class="form-control"
              value="<%= currentSection.section_name %>"
              readonly
            />
          </div>
          <div class="col-md-4">
            <label class="form-label">Current Academic Year</label>
            <input
              type="text"
              class="form-control"
              value="<%= currentAcademicYear %>"
              readonly
            />
          </div>
        </div>

        <!-- New Information -->
        <div class="row mb-3">
          <div class="col-md-4">
            <label class="form-label">Promote to Class</label>
            <select
              name="class_id"
              class="form-select"
              required
              id="classSelect"
            >
              <option value="">-- Select Class --</option>
              <% classes.forEach(cls => { %>
              <option value="<%= cls.id %>"><%= cls.class_name %></option>
              <% }); %>
            </select>
          </div>
          <div class="col-md-4">
            <label class="form-label">New Section</label>
            <select name="section_id" class="form-select" id="sectionSelect">
              <option value="">-- Select Section --</option>
              <!-- Will be populated via AJAX -->
            </select>
          </div>
          <div class="col-md-4">
            <label class="form-label">New Academic Year</label>
            <input
              type="text"
              name="academic_year"
              class="form-control"
              value="<%= nextAcademicYear %>"
              required
              readonly
            />
          </div>
        </div>

        <div class="form-group mb-3">
          <label class="form-label">Reason (Optional)</label>
          <textarea name="reason" class="form-control" rows="3"></textarea>
        </div>

        <div class="d-flex justify-content-between">
          <a
            href="/students/student-form?studentId=<%= student.id %>"
            class="btn btn-secondary"
          >
            <i class="fas fa-times me-1"></i> Cancel
          </a>
          <button type="submit" class="btn btn-success">
            <i class="fas fa-user-graduate me-1"></i> Promote Student
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<%- include('../layouts/footer') %>
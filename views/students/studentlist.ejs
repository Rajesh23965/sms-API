<%- include('../layouts/header') %>

<div class="">
    <div class="row justify-content-center">
      <div class="col-lg-12">
        <div class="card shadow-lg rounded-0">
          <div class="card-header bg-gradient text-capitalize  d-flex flex-row justify-content-between align-items-center">
            <a class="btn btn-danger rounded-1 shadow" href="/students/student-form">Add Student</a>
            <h3><i class="fas fa-user-graduate me-2"></i>Registered List</h3>
          </div>
          <div class="card-body p-4">
           
  
            <% if (success && typeof success === 'string' && success.trim() !== '') { %>
              <div class="alert alert-success"><%= success %></div>
            <% } %>

            <table class="table table-responsive">
                <thead>
                    <tr>
                        <th>S.N</th>
                        <th>Admission number</th>
                        <th>Student name</th>
                        <th>Roll number</th>
                        <th>class</th>
                        <th>Section</th>
                        <th>Admission Date</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                  <% let i = 0; %>
                  <% studentlist.forEach(function(sl) { %>
                    <tr>
                      <td><%= ++i %></td>
                      <td><%= sl.admission_no ?? '' %></td>
                      <td><%= (sl.first_name ?? '') + ' ' + (sl.middle_name ?? '') + ' ' + (sl.last_name ?? '') %></td>
                      <td><%= sl.id ?? '' %></td>
                      <td><%= sl.class_id ?? '' %></td>
                      <td><%= sl.section_id ?? '' %></td>
                      <td><%= new Date(sl.createdAt).toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: '2-digit', year: 'numeric' }).replace(',', '-') %></td>

                      <td>
                        <a class="btn btn-outline-success fa fa-edit" href="<%= sl.id ? '/students/student-form?studentId=' + sl.id : '#' %>"></a>

                        <a class="btn btn-outline-danger fa fa-trash" href=""></a>
                      </td>

                    </tr>
                  <% }) %>
                </tbody>
                
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

<%- include('../layouts/footer') %>
